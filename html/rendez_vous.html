<!DOCTYPE html>
<html lang="fr">
    <head>
        <title>Rendez-vous</title>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
        <link rel="stylesheet" href="../css/rendez_vous.css">
        <link rel="stylesheet" href="../css/central.css">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Corben&family=Fira+Sans&family=Inter+Tight:ital,wght@1,300&family=Rubik:ital@1&display=swap" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    </head>
    <body>
        <nav> <!-- Barre de navigation  -->
            <div class="logo"><a href="./index.html"><img src="../img/logo-nav.png" width="110px" alt="LOGO LSPD"></a></div>
            <ul>
                <li><a class="links" href="./galerie.html">GALERIE</a></li>
                <li><a class="links" href="./faq.html">LSPD FAQ</a></li>
                <li><a class="links" href="./events.html">LSPD EVENTS</a></li>
                <li><a class="links" href="./rendez_vous.html">RENDEZ-VOUS</a></li>
            </ul>
            <a class="link-button" href="./formulaire.html"><button>Postuler</button></a>
        </nav>
        <div class="main"></div>
        <div class="container mt-5 form">
            <h1>Prise de rendez-vous</h1>
            <form onsubmit="sendContact(event)">
                <div class="mb-3">
                  <label for="nameInput" class="form-label">Nom et Prénom</label>
                  <input type="text" class="form-control" id="nameInput">
                </div>
                <div class="mb-3">
                    <label for="dispoInputI" class="form-label">vos disponibilités</label>
                    <input type="datetime-local" class="form-control" id="dispoInputI">
                    <input type="datetime-local" class="form-control" id="dispoInputII">
                    <input type="datetime-local" class="form-control" id="dispoInputIII">
                  </div>
                <div class="mb-3">
                  <label for="sujetInput" class="form-label">Sujet de la demande de prise d'un rendez-vous</label>
                  <textarea class="form-control" id="sujetInput" rows="3"></textarea>
                </div>
                <div class="mb-3">
                    <label for="pseudoInput" class="form-label">Pseudo et hashtag discord (pseudo#0000)</label>
                    <input type="text" class="form-control" id="pseudoInput">
                </div>
                <button type="submit" class="btn btn-primary">envoyer</button>
            </form>
        </div>
        <footer> <!-- pied de page avec les choses importantes pour l’intéraction -->
            <table>
                <tr>
                    <td rowspan="3"><img src="../img/logo.png" width="90px" alt="logo lspd"></td>
                    <td><a href="">Accueil</a></td>
                    <td><a href="">évènement</a></td>
                </tr>
                <tr>

                    <td><a href="">calendrier recrutement</a></td>
                    <td><a href="">Qualification</a></td>
                </tr>
                <tr>
                    <td></td>
                    <td><a href="">Disclaimer</a></td>
                    <td><a href="">LSPD</a></td>
                    <!--<td><a href=""><img src="/img/insta.png" alt="instagram"></a></td>-->
                    <td><a href="https://www.facebook.com/profile.php?id=100090385838472"><img src="/img/facebook.png" alt="Facebook"></a></td>
                    <td><a href="https://www.youtube.com/channel/UCfVS81nWiukLosxmOosF8uQ"><img src="/img/youtube.png" alt="Youtube"></a></td>
                    <!--<td><a href=""><img src="/img/twitter.png" alt="twitter" width="25px"></a></td>-->
                    <td><a href="https://www.tiktok.com/@alexgrants24?lang=fr"><img src="/img/tiktok.png" alt="TikTok" width="57px"></a></td>
                </tr>
            </table>
        </footer>
          <script>
            async function sendContact(ev) {
              ev.preventDefault();
              const sendername = document
                .getElementById('nameInput').value;
              const senderdispoI = document
                .getElementById('dispoInputI').value;
                const senderdispoII = document
                    .getElementById('dispoInputII').value;
                const senderdispoIII = document
                    .getElementById('dispoInputIII').value;
                const sendersujet = document
                .getElementById('sujetInput').value;
                const senderpseudo = document
                    .getElementById('pseudoInput').value;
              const webhookBody = {
                embeds: [{
                  title: 'Prise de rendez-vous',
                  color: 0xFF0000,
                  fields: [{
                      name: 'Nom et prénom',
                      value: sendername
                    },
                    {
                      name: 'disponibilité(s) 1',
                      value: senderdispoI
                    },
                      {
                          name: 'disponibilité(s) 2',
                          value: senderdispoII
                      },
                      {
                          name: 'disponibilité(s) 3',
                          value: senderdispoIII
                      },
                    {
                      name: 'sujet de la demande',
                      value: sendersujet
                    },
                    {
                        name: 'pseudo discord',
                        value: senderpseudo
                    }
                  ]
                }],
              };
              const webhookUrl = 'https://discord.com/api/webhooks/1155931411140849704/7Ho172871rGmn4X4jgjloE4T1kDzHclKqZMJamVxDPxriZpdRY7U7Cqc4j1WMvN5wYKr';
              const response = await fetch(webhookUrl, {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify(webhookBody),
              });
              if (response.ok) {
                alert('Votre demande de rendez-vous à bien été pris en compte!');
              } else {
                alert('Il y a une erreur ! veuillez réessayer plus tard !');
              }
            }
          </script>
    </body>
</html>
